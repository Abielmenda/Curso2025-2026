@prefix ex: <https://data.example.org/transport/bcn/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <http://schema.org/> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .

### Ontology metadata
ex: a owl:Ontology ;
    dcterms:title "Barcelona Rail Transport Ontology"@en ;
    dcterms:creator "Student group — Hands-on 2"@en ;
    dcterms:source <https://opendata-ajuntament.barcelona.cat/> ;
    dcterms:license <https://creativecommons.org/licenses/by/4.0/> ;
    dcterms:issued "2025-10-05"^^xsd:date ;
    owl:versionInfo "1.0.0" ;
    rdfs:comment "An OWL ontology to describe railway, suburban, and funicular transport infrastructure and services in Barcelona, aligned with Open Data BCN datasets."@en .

#############################
# Core classes
#############################

ex:TransportFeature a owl:Class ;
    rdfs:label "Transport feature"@en ;
    rdfs:comment "Abstract superclass for transport-related entities."@en .

ex:Operator a owl:Class ;
    rdfs:label "Operator"@en ;
    rdfs:comment "Organization that operates a line or service (e.g., Renfe, FGC, TMB)."@en ;
    rdfs:subClassOf schema:Organization, ex:TransportFeature .

ex:Line a owl:Class ;
    rdfs:label "Line"@en ;
    rdfs:comment "A rail/funicular line identified by a code and operated by an operator."@en ;
    rdfs:subClassOf ex:TransportFeature .

ex:Service a owl:Class ;
    rdfs:label "Service"@en ;
    rdfs:comment "A concrete service pattern (e.g., R1, R2 Nord, Llobregat–Anoia)."@en ;
    rdfs:subClassOf ex:TransportFeature .

ex:Station a owl:Class ;
    rdfs:label "Station"@en ;
    rdfs:comment "A railway station where passengers may board or alight; may contain multiple stops/platforms."@en ;
    rdfs:subClassOf schema:Place, ex:TransportFeature .

ex:Stop a owl:Class ;
    rdfs:label "Stop"@en ;
    rdfs:comment "A stop or platform within a station (physical boarding location)."@en ;
    rdfs:subClassOf schema:Place, ex:TransportFeature .

ex:Funicular a owl:Class ;
    rdfs:label "Funicular"@en ;
    rdfs:comment "A funicular installation; may be modelled as a kind of line & infrastructure."@en ;
    rdfs:subClassOf ex:Line .

ex:Municipality a owl:Class ;
    rdfs:label "Municipality"@en ;
    rdfs:subClassOf schema:AdministrativeArea, ex:TransportFeature .

ex:RailMode a owl:Class ;
    rdfs:label "Rail mode"@en ;
    rdfs:comment "Controlled vocabulary for types of rail: suburban, regional, metro, tram, funicular."@en ;
    rdfs:subClassOf skos:Concept .

#############################
# Object properties
#############################

ex:operatedBy a owl:ObjectProperty ;
    rdfs:label "operated by"@en ;
    rdfs:domain ex:Line ;
    rdfs:range ex:Operator ;
    owl:inverseOf ex:operates .

ex:operates a owl:ObjectProperty ;
    rdfs:label "operates"@en ;
    rdfs:domain ex:Operator ;
    rdfs:range ex:Line .

ex:hasStation a owl:ObjectProperty ;
    rdfs:label "has station"@en ;
    rdfs:domain ex:Line ;
    rdfs:range ex:Station ;
    owl:inverseOf ex:onLine .

ex:onLine a owl:ObjectProperty ;
    rdfs:label "on line"@en ;
    rdfs:domain ex:Station ;
    rdfs:range ex:Line .

ex:hasStop a owl:ObjectProperty ;
    rdfs:label "has stop"@en ;
    rdfs:domain ex:Station ;
    rdfs:range ex:Stop ;
    owl:inverseOf ex:stopOf .

ex:stopOf a owl:ObjectProperty ;
    rdfs:label "stop of"@en ;
    rdfs:domain ex:Stop ;
    rdfs:range ex:Station .

ex:locatedIn a owl:ObjectProperty ;
    rdfs:label "located in"@en ;
    rdfs:domain ex:Station ;
    rdfs:range ex:Municipality ;
    rdfs:subPropertyOf schema:containedInPlace .

ex:interchangesWith a owl:ObjectProperty , owl:SymmetricProperty ;
    rdfs:label "interchanges with"@en ;
    rdfs:domain ex:Station ;
    rdfs:range ex:Station ;
    rdfs:comment "Two stations between which walking transfer is feasible."@en .

ex:hasMode a owl:ObjectProperty ;
    rdfs:label "has mode"@en ;
    rdfs:domain ex:Line ;
    rdfs:range ex:RailMode .

#############################
# Datatype properties
#############################

ex:lineCode a owl:DatatypeProperty ;
    rdfs:label "line code"@en ;
    rdfs:domain ex:Line ;
    rdfs:range xsd:string .

ex:stationCode a owl:DatatypeProperty ;
    rdfs:label "station code"@en ;
    rdfs:domain ex:Station ;
    rdfs:range xsd:string .

ex:stationName a owl:DatatypeProperty ;
    rdfs:label "station name"@en ;
    rdfs:domain ex:Station ;
    rdfs:range xsd:string ;
    rdfs:subPropertyOf rdfs:label .

ex:zone a owl:DatatypeProperty ;
    rdfs:label "fare zone"@en ;
    rdfs:domain ex:Station ;
    rdfs:range xsd:string .

ex:address a owl:DatatypeProperty ;
    rdfs:label "address"@en ;
    rdfs:domain ex:Station ;
    rdfs:range xsd:string ;
    rdfs:subPropertyOf schema:streetAddress .

ex:openingDate a owl:DatatypeProperty ;
    rdfs:label "opening date"@en ;
    rdfs:domain ex:Station ;
    rdfs:range xsd:date .

geo:lat a owl:DatatypeProperty ;
    rdfs:label "latitude"@en ;
    rdfs:domain schema:Place ;
    rdfs:range xsd:decimal ;
    owl:equivalentProperty schema:latitude .

geo:long a owl:DatatypeProperty ;
    rdfs:label "longitude"@en ;
    rdfs:domain schema:Place ;
    rdfs:range xsd:decimal ;
    owl:equivalentProperty schema:longitude .

#############################
# Alignment and constraints
#############################

ex:Line a owl:Class ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty ex:operatedBy ;
        owl:allValuesFrom ex:Operator
    ] .

ex:Station a owl:Class ;
    rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty geo:lat ;
        owl:cardinality "1"^^xsd:nonNegativeInteger
    ] ,
    [
        a owl:Restriction ;
        owl:onProperty geo:long ;
        owl:cardinality "1"^^xsd:nonNegativeInteger
    ] .

#############################
# Example controlled vocabulary terms (RailMode)
#############################

ex:Suburban a skos:Concept ; skos:inScheme ex:RailMode ; skos:prefLabel "Suburban"@en .
ex:Regional a skos:Concept ; skos:inScheme ex:RailMode ; skos:prefLabel "Regional"@en .
ex:Metro a skos:Concept ; skos:inScheme ex:RailMode ; skos:prefLabel "Metro"@en .
ex:Tram a skos:Concept ; skos:inScheme ex:RailMode ; skos:prefLabel "Tram"@en .
ex:FunicularMode a skos:Concept ; skos:inScheme ex:RailMode ; skos:prefLabel "Funicular"@en .

